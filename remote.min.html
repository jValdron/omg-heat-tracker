<html> <head> <script>function loadHeats(){var xhr=new XMLHttpRequest(); xhr.open('GET', 'heats'); xhr.onload=function(){if (xhr.status===200){var heats=JSON.parse(xhr.responseText); heats.forEach(function (result, i){document.getElementById('heat_' + i).innerText=result;});}else{alert('Request failed. Returned status of ' + xhr.status + '/' + xhr.responseText);}}; xhr.send();}function win(result){var xhr=new XMLHttpRequest(); xhr.open('POST', 'heat'); xhr.onload=function(){if (xhr.status===201){loadHeats();}else{alert('Request failed. Returned status of ' + xhr.status + '/' + xhr.responseText);}}; xhr.send(JSON.stringify({"result": result}));}function reset(){var xhr=new XMLHttpRequest(); xhr.open('DELETE', 'heats'); xhr.onload=function(){if (xhr.status===200){loadHeats();}else{alert('Request failed. Returned status of ' + xhr.status + '/' + xhr.responseText);}}; xhr.send();}function undo(){var xhr=new XMLHttpRequest(); xhr.open('DELETE', 'heat/last'); xhr.onload=function(){if (xhr.status===200){loadHeats();}else{alert('Request failed. Returned status of ' + xhr.status + '/' + xhr.responseText);}}; xhr.send();}window.onload=loadHeats; </script> </head> <body> <div>Heat #1: <span id="heat_0">Loading...</span></div><div>Heat #2: <span id="heat_1">Loading...</span></div><div>Heat #3: <span id="heat_2">Loading...</span></div><div>Heat #4: <span id="heat_3">Loading...</span></div><div>Heat #5: <span id="heat_4">Loading...</span></div><div> <button onclick="win(1)">Win Left</button> <button onclick="win(2)">Win Right</button> <button onclick="win(3)">Tie</button> </div><div> <button onclick="reset()">Reset Race</button> <button onclick="undo()">Undo Heat</button> </div></body></html>